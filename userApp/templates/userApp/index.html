{% extends "base.html" %}
{% load i18n static %}

{% block content %}
<section class="login-wrap">
  <div class="login-card">
    <h1 class="login-title">Welcome to the BeeDev Portal</h1>
    <p class="login-sub">Clients & Employees: sign in below.</p>

    {# show any flash messages #}
    {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          <li class="message {{ message.tags }}">{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    {# built-in AuthenticationForm from LoginView #}
    {% if form.errors %}
      <p class="errornote">
        {% translate "Please correct the error below." %}
        {% if form.errors|length > 1 %}{% translate " Please correct the errors below." %}{% endif %}
      </p>
    {% endif %}

    <form method="post" action="">
      {% csrf_token %}

      <div class="form-row">
        <label for="id_username">{% translate "Username" %}</label>
        {{ form.username }}
        {{ form.username.errors }}
      </div>

      <div class="form-row">
        <label for="id_password">{% translate "Password" %}</label>
        <div class="password-field">
          {{ form.password }}
          <button type="button" class="show-pass" aria-label="Show password" onclick="togglePass()">üëÅ</button>
        </div>
        {{ form.password.errors }}
      </div>

      {# preserve ?next=... if present #}
      <input type="hidden" name="next" value="{{ next }}">

      {{ form.non_field_errors }}

      <div class="submit-row">
        <button type="submit" class="btn-login">{% translate "Log in" %}</button>
      </div>
    </form>

    <p class="login-help">
      Employees can open <a href="/admin/">Admin</a> after logging in (no second login needed).
    </p>
  </div>
</section>

<script>
function togglePass() {
  const input = document.getElementById('id_password');
  if (!input) return;
  input.type = input.type === 'password' ? 'text' : 'password';
}
</script>
{% endblock content %}
